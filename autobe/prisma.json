{"files":[{"filename":"schema-01-actors.prisma","namespace":"Actors","models":[{"name":"todo_mvp_guests","description":"Guest identities representing unauthenticated visitors. Used to optionally associate anonymous activity or apply policy limits without conflating with authenticated {@link todo_mvp_users} or {@link todo_mvp_admins}. Typically managed indirectly via session flows in {@link todo_mvp_sessions} (reference-only). Minimal data by design to honor privacy and MVP scope.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"created_at","type":"datetime","description":"Creation timestamp for this guest identity. Enables temporal ordering and minimal auditability.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for this guest identity record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for compliance or cleanup workflows. When set, the record is considered removed from active use.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[]},{"name":"todo_mvp_users","description":"Authenticated user accounts for the Todo MVP. Each user owns personal Todos and operates within strict owner-only boundaries. Includes login credentials and lifecycle state to support deactivation/reactivation. Related operational records (sessions, audits) live in {@link todo_mvp_sessions} and {@link todo_mvp_audit_events} (reference-only).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"User’s unique email used for authentication and communication in the MVP. Business-unique within users.","nullable":false},{"name":"password_hash","type":"string","description":"Argon2/bcrypt or similar password hash. Never store plain passwords.","nullable":false},{"name":"status","type":"string","description":"Account lifecycle status. Suggested values: \"active\" or \"deactivated\" to support admin account management.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the user account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the user account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp to support user-initiated account deletion/anonymization workflows before permanent purge.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]},{"name":"todo_mvp_admins","description":"Administrative identities with limited oversight capabilities in MVP (aggregate metrics, account lifecycle). Admins do not browse or edit member Todo content per requirements. Managed independently from {@link todo_mvp_users} for clear authorization boundaries.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Admin’s unique email used for authentication. Unique within admins.","nullable":false},{"name":"password_hash","type":"string","description":"Hashed password credential for admin authentication. Never store plain passwords.","nullable":false},{"name":"status","type":"string","description":"Admin lifecycle status. Suggested values: \"active\" or \"deactivated\" for operational control.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the admin account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the admin account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp supporting account closure or compliance workflows prior to permanent removal.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-auth.prisma","namespace":"Auth","models":[{"name":"todo_mvp_sessions","description":"Authentication session records for todoMvp. Each session represents a signed-in state for an authenticated actor (user or admin). A session links to either a {@link todo_mvp_users} or a {@link todo_mvp_admins} record (exactly one typically populated by application rules). Lifecycle is governed by timestamps: created_at/updated_at for audit, last_accessed_at for idle timeout handling, expires_at for absolute TTL, and revoked_at when a user signs out. Sessions are system-managed artifacts supporting authentication and authorization; not a user-authored content entity.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_mvp_user_id","type":"uuid","description":"Authenticated user owner of this session. Target model's {@link todo_mvp_users.id}.","relation":{"name":"user","targetModel":"todo_mvp_users","targetFieldName":"id"},"unique":false,"nullable":true},{"name":"todo_mvp_admin_id","type":"uuid","description":"Authenticated admin owner of this session. Target model's {@link todo_mvp_admins.id}.","relation":{"name":"admin","targetModel":"todo_mvp_admins","targetFieldName":"id"},"unique":false,"nullable":true}],"plainFields":[{"name":"session_token_hash","type":"string","description":"Hashed representation of the session bearer token for lookup and validation (plaintext tokens are never stored). Uniquely identifies a session.","nullable":false},{"name":"created_at","type":"datetime","description":"Session creation timestamp (when sign-in succeeded).","nullable":false},{"name":"updated_at","type":"datetime","description":"Last time this session record itself was modified (e.g., token rotation or administrative change).","nullable":false},{"name":"last_accessed_at","type":"datetime","description":"Most recent time the session was actively used. Supports inactivity timeouts and security analytics.","nullable":false},{"name":"expires_at","type":"datetime","description":"Absolute expiration time after which this session is no longer valid, regardless of activity.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when the session was explicitly revoked (e.g., sign-out). Null means not revoked.","nullable":true}],"uniqueIndexes":[{"fieldNames":["session_token_hash"],"unique":true}],"plainIndexes":[{"fieldNames":["expires_at"]},{"fieldNames":["todo_mvp_user_id","expires_at"]},{"fieldNames":["todo_mvp_admin_id","expires_at"]},{"fieldNames":["todo_mvp_user_id","revoked_at","expires_at"]},{"fieldNames":["todo_mvp_admin_id","revoked_at","expires_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-todos.prisma","namespace":"Todos","models":[{"name":"todo_mvp_todos","description":"Core Todo items owned by a single authenticated user. Each record represents one actionable item with a required title, optional notes and a day-level due date, and a simple lifecycle (\"open\" or \"completed\"). Ownership is enforced via a required relation to {@link todo_mvp_users}. Timestamps support list ordering and audit-friendly visibility (created/updated, plus completed_at only when status is \"completed\"). This table intentionally excludes denormalized aggregates and soft-deletion to match MVP scope and privacy constraints. For due_date, prefer storing as DATE (no time-of-day) to avoid timezone ambiguity; if not feasible, normalize consistently (e.g., UTC midnight).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_mvp_user_id","type":"uuid","description":"Owner user's {@link todo_mvp_users.id}.","relation":{"name":"owner","targetModel":"todo_mvp_users","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Short human-readable label of the task. Required; trimmed by application logic; typical length 1–120 characters. Duplicate titles are allowed per user.","nullable":false},{"name":"notes","type":"string","description":"Optional free-form details for the task. Preserves line breaks; up to about 1,000 characters by business rules.","nullable":true},{"name":"status","type":"string","description":"Current lifecycle state of the task. Allowed values by business rules: \"open\" or \"completed\". Defaults to \"open\" on creation.","nullable":false},{"name":"due_date","type":"datetime","description":"Optional day-level target completion date interpreted in the user's local time context. Prefer storing as DATE (no time) to avoid timezone ambiguity.","nullable":true},{"name":"completed_at","type":"datetime","description":"Timestamp recorded only when status transitions to \"completed\". Cleared when toggled back to \"open\".","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp recorded when the Todo is created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last updated timestamp recorded whenever the Todo is successfully edited or its status changes.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["todo_mvp_user_id","status","created_at"]},{"fieldNames":["todo_mvp_user_id","status","due_date"]},{"fieldNames":["todo_mvp_user_id","created_at"]},{"fieldNames":["todo_mvp_user_id","status","completed_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-audits.prisma","namespace":"Audits","models":[{"name":"todo_mvp_audit_events","description":"Append-only audit trail capturing user- or admin-initiated Todo lifecycle actions (create, update, complete, uncomplete, delete) for privacy-preserving accountability. References to actors and targets are nullable with onDelete: SetNull to preserve audit history after user or Todo deletion during the retention window. No Todo content (title/notes) is stored. Typical queries filter by actor or target resource over time.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_mvp_user_id","type":"uuid","description":"Acting user's {@link todo_mvp_users.id}. Nullable to preserve records after user deletion.","relation":{"name":"actorUser","targetModel":"todo_mvp_users","onDelete":"SetNull"},"unique":false,"nullable":true},{"name":"todo_mvp_admin_id","type":"uuid","description":"Optional acting admin's {@link todo_mvp_admins.id}. Nullable and preserved via onDelete: SetNull.","relation":{"name":"actorAdmin","targetModel":"todo_mvp_admins","onDelete":"SetNull"},"unique":false,"nullable":true},{"name":"todo_mvp_todo_id","type":"uuid","description":"Target Todo's {@link todo_mvp_todos.id}. Nullable to preserve records after Todo deletion.","relation":{"name":"targetTodo","targetModel":"todo_mvp_todos","onDelete":"SetNull"},"unique":false,"nullable":true}],"plainFields":[{"name":"event_type","type":"string","description":"Business event type. Allowed values (examples): \"todo_created\", \"todo_updated\", \"todo_completed\", \"todo_uncompleted\", \"todo_deleted\". Application validates allowed set.","nullable":false},{"name":"event_description","type":"string","description":"Optional short, content-free description for operational context. Must not include Todo content (title/notes).","nullable":true},{"name":"created_at","type":"datetime","description":"Event creation time (audit record creation).","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of the last administrative correction to this audit record, if any.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for retention management. When set, the record is logically removed from standard reads.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["todo_mvp_user_id","created_at"]},{"fieldNames":["todo_mvp_admin_id","created_at"]},{"fieldNames":["todo_mvp_todo_id","created_at"]},{"fieldNames":["event_type","created_at"]}],"ginIndexes":[]},{"name":"todo_mvp_compliance_removal_records","description":"Minimal, privacy-preserving records of administrative compliance removals. References to the acting admin and removed Todo are nullable with onDelete: SetNull to preserve the record after entity deletion. One record per removed Todo (unique when not null). No Todo content is stored.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_mvp_admin_id","type":"uuid","description":"Acting administrator's {@link todo_mvp_admins.id}. Nullable to maintain record integrity if the admin account is deleted later.","relation":{"name":"actorAdmin","targetModel":"todo_mvp_admins","onDelete":"SetNull"},"unique":false,"nullable":true},{"name":"todo_mvp_todo_id","type":"uuid","description":"Removed Todo's {@link todo_mvp_todos.id}. Nullable to allow the record to persist after the Todo is deleted.","relation":{"name":"removedTodo","targetModel":"todo_mvp_todos","onDelete":"SetNull"},"unique":false,"nullable":true}],"plainFields":[{"name":"reason_code","type":"string","description":"High-level reason code for compliance removal (examples: \"policy_violation\", \"legal_request\", \"user_request_via_admin\"). No Todo content allowed.","nullable":false},{"name":"notes","type":"string","description":"Optional administrative notes that must not include user Todo content.","nullable":true},{"name":"action_effective_at","type":"datetime","description":"Timestamp when the removal took effect from the user's perspective.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation time.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of the last administrative correction to this record, if any.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for retention and lifecycle control.","nullable":true}],"uniqueIndexes":[{"fieldNames":["todo_mvp_todo_id"],"unique":true}],"plainIndexes":[{"fieldNames":["todo_mvp_admin_id","created_at"]},{"fieldNames":["action_effective_at","created_at"]}],"ginIndexes":[]}]}]}